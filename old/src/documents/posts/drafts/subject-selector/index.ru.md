# Селектор контекста (subject selector)

В набросках модуля CSS … [уточнить] есть такая штука — subject selector. Это такой «святой Грааль» вёрстки: возможность указывать не на последний в селекторе элемент, а на любой.

Синтаксис предлагается довольно простой:

    .foo! > .bar { }

Селектор из этого примера применит стили только к тому элементу с классом `.foo`, у которого будет непосредственный ребёнок `.bar`.

Возможности, которые этот селектор мог бы предоставить — почти безграничны. Но…

## Этот селектор находится в опасности!

Какой бы хорошей не казалась эта идея (и ниже я постараюсь описать несколько простейших сценариев использования таких селекторов), разработчики браузеров и авторы спецификаций [упомянуть и проставить ссылки] думают над тем, чтобы вычеркнуть эту возможность из спецификаций.

Да, ни один браузер ещё не реализовал этот селектор, да — это совсем не простая задача, да — злоупотребление этим селектором может вызвать проблемы в производительности страниц, но это всё не значит, что эту фичу стоит закопать в могилу.

Эта фича может дать очень многое веб-разработчикам, если она будет реализована. Многие вещи, возможные с её помощью, невозможно реализовать иначе (очень, очень редко можно только сделать *видимость* работы соответствующих селекторов).

Я не буду сейчас подробно расписывать всё, что я думаю о процессе стандартизации подобных фич и их реализации браузерами, скажу только, что как только я вижу аргумент о сложности реализации той или иной функциональности как причина вычернуть что-то из спецификаций, я очень огорчаюсь. «Ой, делать браузеры сложно, пойдём по магазинам!»

Но в этой заметке я постараюсь описать те случаи, где лично мне бы пригодилась подобная штука, и даже приведу несколько живых примеров того, как бы этот селектор мог работать.

[хочется тут рисунок с няками, держащих плакаты типа «спасите subject selector», с восклицательными знаками и всем таким]

## Сценарии использования

#### Изменяем родителя при изменении ребёнка

Очень, очень часто возникает необходимость что-то сделать на родителе когда состояние ребёнка меняется.

Например, есть у нас чекбокс. И когда он чекнут, мы хотим выделить весь параграф, или, о боже, всю строку таблицы!

#### Разные стили для разного содержимого

Довольно часто хочется делать разное с родителем в зависимости от того, что в нём содержится.

Да тупо возьмём абстрактный блог на тамблере — в нём существует много видов постов: видео-пост, цитата, статья, статья с картинкой и т.д. Вполне логичным выглядит желание стилизовать весь пост в зависимости от его типа. Ну, скажем, менять фон.

С контекстным селектором это было бы очень просто: говорим «если внутри этого блока есть элемент X, применяем к нему эти стили» и так далее. Видим тег `video` в посте? Это видео-пост. Видим картинку, идущую в самом начале? Ок, меняем стили соответствующим образом. Видим цитату — и она является единственным элементом поста? Отлично!

Или вот тупо хотим правильно работать с отступами вне зависимости от типа содержимого. Хотим так: если параграф, отступ снизу такой, если картинка — другой, и так далее. Да, есть пути добиться этого частично, но каждый из таких вариантов, по сути — хак. Скажем, мы можем сделать минимальный отступ для любого контента, но вот уменьшить мы его не можем. Вот есть у нас блок, у него отступы со всех сторон. Вот есть у него табы сверху, прилипающие по дизайну к верхней кромке. И кроме табов там может быть много чего, флоатящегося или ещё как-либо расположенных…

#### 